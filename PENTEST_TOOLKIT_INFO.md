# 🔒 SSRF Penetration Testing Toolkit

## 📍 Location

The complete SSRF Penetration Testing Toolkit has been moved to a **separate directory**:

```
📁 C:\Users\ASUS-PRO\Desktop\microservice_pentest_toolkit\
```

This keeps the toolkit **independent** from the vulnerable microservice application.

---

## 🎯 Purpose

The toolkit is designed to **detect and exploit SSRF vulnerabilities** in this microservice architecture using three methodologies:

- **🕶️ Black Box** - External testing without source code
- **🔍 Gray Box** - Testing with partial system knowledge (Docker, configs)  
- **📝 White Box** - Source code analysis

---

## 🚀 Quick Start

### 1️⃣ Navigate to Toolkit

```powershell
cd C:\Users\ASUS-PRO\Desktop\microservice_pentest_toolkit
```

### 2️⃣ Install Dependencies

```powershell
pip install -r requirements.txt
```

### 3️⃣ Run Interactive Demo

```powershell
python quick_start.py
```

### 4️⃣ Scan This Microservice App

```powershell
# Make sure microservices are running first
cd C:\Users\ASUS-PRO\Desktop\microservice_lab
docker-compose up -d

# Then run toolkit
cd C:\Users\ASUS-PRO\Desktop\microservice_pentest_toolkit
python cli.py --mode blackbox --target http://localhost:8083
```

---

## 📚 Documentation

All documentation is in the toolkit directory:

| File | Purpose |
|------|---------|
| **INDEX.md** | 📍 Navigation guide (START HERE) |
| **README.md** | 📖 Overview & features |
| **USAGE_GUIDE.md** | 🎓 Step-by-step usage |
| **ARCHITECTURE.md** | 🏗️ Technical design |
| **SUMMARY.md** | 📊 Project summary |

---

## 🎯 Testing This Application

### Target Information

- **Vulnerable Service**: `inventory-service` (Flask)
- **Vulnerable Endpoint**: `http://localhost:8083/inventory/<product_id>?callback_url=<url>`
- **Vulnerability Type**: SSRF via `callback_url` parameter
- **Network**: Docker bridge network `172.18.0.0/16`

### Recommended Scan Sequence

```powershell
# 1. Black Box Scan (No knowledge required)
python cli.py --mode blackbox --target http://localhost:8083

# 2. Gray Box Scan (Docker inspection)
python cli.py --mode graybox --docker

# 3. White Box Scan (Source code analysis)
python cli.py --mode whitebox --source-path C:\Users\ASUS-PRO\Desktop\microservice_lab

# 4. Full Scan (All modes)
python cli.py --mode all \
  --target http://localhost:8083 \
  --source-path C:\Users\ASUS-PRO\Desktop\microservice_lab \
  --docker
```

---

## 🔍 Expected Findings

The toolkit should detect:

✅ **Black Box Mode**:
- SSRF vulnerability at `/inventory/<id>` endpoint
- Parameter `callback_url` is vulnerable
- Can access internal services via SSRF
- Confidence score: HIGH

✅ **Gray Box Mode**:
- Docker network topology
- Internal services: user-service (8081), product-service (8082), inventory-service (8083)
- Attack paths from inventory-service to other services

✅ **White Box Mode**:
- Vulnerable code in `inventory-service/app.py` lines 30-46
- Dangerous function: `requests.get(callback_url)` without validation
- Severity: CRITICAL

---

## 📊 Results Location

After scanning, check results:

```powershell
cd C:\Users\ASUS-PRO\Desktop\microservice_pentest_toolkit

# View database
python -c "from core.database import FindingDatabase; db = FindingDatabase(); db.print_statistics()"

# Check reports
ls reports\
```

---

## 🛠️ Troubleshooting

### Issue: Docker not found
```powershell
# Solution: Start Docker Desktop and verify
docker ps
```

### Issue: Target not accessible
```powershell
# Solution: Start microservices first
cd C:\Users\ASUS-PRO\Desktop\microservice_lab
docker-compose up -d
docker-compose ps
```

### Issue: No findings detected
```powershell
# Solution: Check if services are running
curl http://localhost:8083/inventory/1

# Try with explicit callback parameter
curl "http://localhost:8083/inventory/1?callback_url=http://example.com"
```

---

## 🔗 Related Files

### In This Directory (microservice_lab)
- `docker-compose.yml` - Service orchestration
- `SSRF_EXPLOIT_GUIDE.md` - Manual exploitation guide
- `test_ssrf.ps1` - Quick SSRF test script

### In Toolkit Directory (microservice_pentest_toolkit)
- All toolkit source code
- All documentation
- Configuration examples
- Test scripts

---

## 📖 Learn More

1. **Read toolkit documentation**: 
   ```
   cd C:\Users\ASUS-PRO\Desktop\microservice_pentest_toolkit
   notepad INDEX.md
   ```

2. **Understand SSRF vulnerability**:
   ```
   notepad SSRF_EXPLOIT_GUIDE.md
   ```

3. **Manual testing**:
   ```powershell
   .\test_ssrf.ps1
   ```

---

## 🎯 Workflow

```
1. Start vulnerable app
   └─> cd microservice_lab && docker-compose up -d

2. Navigate to toolkit
   └─> cd ..\microservice_pentest_toolkit

3. Run scan
   └─> python cli.py --mode all

4. Analyze results
   └─> Check findings.db and reports/

5. Fix vulnerabilities
   └─> Apply recommendations from report

6. Re-scan to verify
   └─> python cli.py --mode whitebox (fastest verification)
```

---

## ⚠️ Important Notes

1. **Separation**: Toolkit is now **independent** from the vulnerable app
2. **Portability**: Can use toolkit for **other microservices** too
3. **Safety**: Always test on **authorized systems only**
4. **Ethics**: This is for **educational purposes** only

---

## 🚀 Next Steps

1. ✅ Read toolkit documentation (INDEX.md)
2. ✅ Install toolkit dependencies
3. ✅ Run quick_start.py demo
4. ✅ Scan this microservice app
5. ✅ Understand findings
6. ✅ Fix vulnerabilities
7. ✅ Use toolkit on other projects

---

**🔗 Toolkit Location**: `C:\Users\ASUS-PRO\Desktop\microservice_pentest_toolkit\`

**📚 Start Reading**: `INDEX.md` in toolkit directory

**🎯 Happy Pentesting!** 🔒
